(this.webpackJsonpchess=this.webpackJsonpchess||[]).push([[0],{18:function(e,a,t){"use strict";t.r(a);var c=t(3),r=t(2),l=t(1),s=t.n(l),n=(t(8),t(9),[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,-1,-1,8,9,10,11,12,13,14,15,-1,-1,16,17,18,19,20,21,22,23,-1,-1,24,25,26,27,28,29,30,31,-1,-1,32,33,34,35,36,37,38,39,-1,-1,40,41,42,43,44,45,46,47,-1,-1,48,49,50,51,52,53,54,55,-1,-1,56,57,58,59,60,61,62,63,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),u=[21,22,23,24,25,26,27,28,31,32,33,34,35,36,37,38,41,42,43,44,45,46,47,48,51,52,53,54,55,56,57,58,61,62,63,64,65,66,67,68,71,72,73,74,75,76,77,78,81,82,83,84,85,86,87,88,91,92,93,94,95,96,97,98],o={"\u2659":{color:1,hash:0,name:"",slide:!1,offset:[-9,-11],move:-10},"\u2658":{color:1,hash:1,name:"N",slide:!1,offset:[-21,-19,-12,-8,8,12,19,21]},"\u2657":{color:1,hash:2,name:"B",slide:!0,offset:[-11,-9,9,11]},"\u2656":{color:1,hash:3,name:"R",slide:!0,offset:[-10,-1,1,10]},"\u2655":{color:1,hash:4,name:"Q",slide:!0,offset:[-11,-10,-9,-1,1,9,10,11]},"\u2654":{color:1,hash:5,name:"K",slide:!1,offset:[-11,-10,-9,-1,1,9,10,11]},"\u265f":{color:2,hash:6,name:"",slide:!1,offset:[9,11],move:10},"\u265e":{color:2,hash:7,name:"N",slide:!1,offset:[-21,-19,-12,-8,8,12,19,21]},"\u265d":{color:2,hash:8,name:"B",slide:!0,offset:[-11,-9,9,11]},"\u265c":{color:2,hash:9,name:"R",slide:!0,offset:[-10,-1,1,10]},"\u265b":{color:2,hash:10,name:"Q",slide:!0,offset:[-11,-10,-9,-1,1,9,10,11]},"\u265a":{color:2,hash:11,name:"K",slide:!1,offset:[-11,-10,-9,-1,1,9,10,11]}},i=[48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7],b=function(){for(var e=[],a=0;a<64;++a){e.push([]);for(var t=0;t<12;++t)e[a].push(Math.floor(Math.random()*Math.pow(2,32)))}return e},f=[b(),b()],h=Array.from({length:6},(function(){return Math.floor(Math.random()*Math.pow(2,32))})),j=t(6),d=t.n(j),O=t(0),v=function(e){var a;switch(e.display){case"\u2654":a="cm cm-w-king";break;case"\u2655":a="cm cm-w-queen";break;case"\u2656":a="cm cm-w-rook";break;case"\u2657":a="cm cm-w-bishop";break;case"\u2658":a="cm cm-w-knight";break;case"\u2659":a="cm cm-w-pawn";break;case"\u265a":a="cm cm-b-king";break;case"\u265b":a="cm cm-b-queen";break;case"\u265c":a="cm cm-b-rook";break;case"\u265d":a="cm cm-b-bishop";break;case"\u265e":a="cm cm-b-knight";break;case"\u265f":a="cm cm-b-pawn"}return Object(O.jsx)("i",{className:a,"aria-hidden":"true"})},m=function(e){return Object(O.jsx)("button",{className:"square",onClick:e.onClick,style:{backgroundColor:e.color},children:Object(O.jsx)(v,{display:e.value})})},p=function(e){return Object(O.jsx)("button",{className:"square",style:{backgroundColor:"#fff",fontSize:"12px"},children:e.value})},k=function(){var e=Object(l.useState)(-1),a=Object(r.a)(e,2),t=a[0],s=a[1],b=Object(l.useState)((function(){var e=Array(64).fill(null);return e[63]="\u2656",e[62]="\u2658",e[61]="\u2657",e[60]="\u2654",e[59]="\u2655",e[58]="\u2657",e[57]="\u2658",e[56]="\u2656",e[55]="\u2659",e[54]="\u2659",e[53]="\u2659",e[52]="\u2659",e[51]="\u2659",e[50]="\u2659",e[49]="\u2659",e[48]="\u2659",e[0]="\u265c",e[1]="\u265e",e[2]="\u265d",e[3]="\u265b",e[4]="\u265a",e[5]="\u265d",e[6]="\u265e",e[7]="\u265c",e[8]="\u265f",e[9]="\u265f",e[10]="\u265f",e[11]="\u265f",e[12]="\u265f",e[13]="\u265f",e[14]="\u265f",e[15]="\u265f",e})),j=Object(r.a)(b,2),d=j[0],v=j[1],k=Object(l.useState)((function(){for(var e=Array(64).fill(null),a=0;a<8;++a)e[a+48]=1,e[a+56]=1,e[a+8]=2,e[a]=2;return e})),x=Object(r.a)(k,2),y=x[0],g=x[1],w=Object(l.useState)(i),C=Object(r.a)(w,2),S=C[0],N=C[1],q=Object(l.useState)({square:-1,piece:null}),M=Object(r.a)(q,2),A=M[0],B=M[1],R=Object(l.useState)(-1),D=Object(r.a)(R,2),E=D[0],J=D[1],K=Object(l.useState)(0),P=Object(r.a)(K,2),Q=P[0],W=P[1],z=Object(l.useState)(!0),I=Object(r.a)(z,2),F=I[0],G=I[1],H=Object(l.useState)(0),L=Object(r.a)(H,2),T=L[0],U=L[1],V=Object(l.useState)(Array(64).fill(0)),X=Object(r.a)(V,2),Y=X[0],Z=X[1],$=Object(l.useState)([!0,!0,!0,!0]),_=Object(r.a)($,2),ee=_[0],ae=_[1],te=Object(l.useState)((function(){for(var e=[0,0],a=0;a<d.length;++a)if(null!==d[a]){var t=o[d[a]].hash;e[0]^=f[0][a][t],e[1]^=f[1][a][t]}return[e]})),ce=Object(r.a)(te,2),re=ce[0],le=ce[1],se=Object(l.useCallback)((function(e,a,t,c){var r=d.slice(),l=y.slice(),s=ee.slice(),n=S.slice(),u=-1,o={square:-1,piece:null},i={board:r,colors:l,castle:s,pieces:n,enPassant:u,promotion:o};if(null!==r[t]&&(n[n.indexOf(t)]=-1),n[e]=t,r[t]=r[a],r[a]=null,l[t]=l[a],l[a]=null,c<0&&(u=-c),c<3)s[0]=s[0]&&56!==a&&60!==a,s[1]=s[1]&&63!==a&&60!==a,s[2]=s[2]&&0!==a&&4!==a,s[3]=s[3]&&7!==a&&4!==a;else if(3===c){var b=t>a?t-a-8:t-a+8;n[n.indexOf(a+b)]=-1,r[a+b]=null,l[a+b]=null}else if(c<8)switch(s[c-4]=!1,c){case 4:s[1]=!1,n[8]=59,r[59]=r[56],l[59]=l[56],r[56]=null,l[56]=null;break;case 5:s[0]=!1,n[15]=61,r[61]=r[63],l[61]=l[63],r[63]=null,l[63]=null;break;case 6:s[3]=!1,n[24]=3,r[3]=r[0],l[3]=l[0],r[0]=null,l[0]=null;break;case 7:s[2]=!1,n[31]=5,r[5]=r[7],l[5]=l[7],r[7]=null,l[7]=null}else o.square=t;return i}),[d,y,ee,S]),ne=Object(l.useCallback)((function(e,a){for(var t=re[re.length-1].slice(),c=d,r=0;r<2;++r){null!==c[a]&&(t[r]^=f[r][a][o[c[a]].hash]),t[r]^=f[r][e][o[c[e]].hash],t[r]^=f[r][a][o[c[e]].hash];for(var l=0;l<ee.length;++l)t[r]^=ee[l]&&h[l];t[r]^=h[4],t[r]^=h[5]*E}return t}),[re,ee,d,E]),ue=Object(l.useCallback)((function(e,a,t,c){var r=ne(a,t);return le((function(e){var a=e.slice();return a.push(r),a})),se(e,a,t,c)}),[ne,se]),oe=Object(l.useCallback)((function(e){var a=S[e],t=[];if(-1===a)return t;var r=d,l=y,s=1===l[a]?2:1,i=r[a],b=o[i];if(b.name){var f,h=Object(c.a)(b.offset);try{for(h.s();!(f=h.n()).done;)for(var j=f.value,O=a;-1!==(O=n[u[O]+j]);){if(null!==l[O]){l[O]===s&&t.push([e,a,O,2]);break}if(t.push([e,a,O,1]),!b.slide)break}}catch(w){h.e(w)}finally{h.f()}}else{var v,m=Object(c.a)(b.offset);try{for(m.s();!(v=m.n()).done;){var p=v.value,k=a;-1!==(k=n[u[k]+p])&&l[k]===s?k<=7&&k>=0||k<=63&&k>=56?t.push([e,a,k,9]):t.push([e,a,k,2]):-1!==k&&E===k&&t.push([e,a,k,3])}}catch(w){m.e(w)}finally{m.f()}var x=n[u[a]+b.move];if(null===l[x])if(x<=7&&x>=0||x<=63&&x>=56)t.push([e,a,x,8]);else if(t.push([e,a,x,1]),x<=23&&x>=16&&2===l[a]||x<=47&&x>=40&&1===l[a]){var g=n[u[x]+b.move];null===l[g]&&t.push([e,a,g,-x])}}return"\u2654"===i?(ee[0]&&null===r[57]&&null===r[58]&&null===r[59]&&t.push([e,a,a-2,4]),ee[1]&&null===r[61]&&null===r[62]&&t.push([e,a,a+2,5])):"\u265a"===i&&(ee[2]&&null===r[1]&&null===r[2]&&null===r[3]&&t.push([e,a,a-2,6]),ee[3]&&null===r[5]&&null===r[6]&&t.push([e,a,a+2,7])),t}),[S,d,ee,E,y]),ie=Object(l.useCallback)((function(e,a){for(var t=0,l=0,s=Object.entries(o);l<s.length;l++){var i,b=Object(r.a)(s[l],2),f=b[0],h=b[1],j=Object(c.a)(h.offset);try{for(j.s();!(i=j.n()).done;){var d=i.value;if(!(h.color&t))for(var O=e;-1!==(O=n[u[O]-d]);){if(a[O]===f){t|=h.color;break}if(a[O])break;if(!h.slide)break}}}catch(v){j.e(v)}finally{j.f()}}return t}),[]),be=Object(l.useCallback)((function(e){return e.filter((function(e){if(e[0]<16!==F)return!1;switch(e[3]){case 4:return!(2&ie(60,d))&&!(2&ie(59,d))&&!(2&ie(58,d));case 5:return!(2&ie(60,d))&&!(2&ie(61,d))&&!(2&ie(62,d));case 6:return!(1&ie(4,d))&&!(1&ie(3,d))&&!(1&ie(2,d));case 7:return!(1&ie(4,d))&&!(1&ie(5,d))&&!(1&ie(6,d))}var a=e[3]>=8?se(e[0],e[1],e[2],e[3]-7):se(e[0],e[1],e[2],e[3]),t=a.pieces[12],c=a.pieces[28];return!(2&ie(t,a.board)&&F)&&!(1&ie(c,a.board)&&!F)}))}),[d,F,se,ie]),fe=Object(l.useCallback)((function(e){var a=S.indexOf(e),t=Array(64).fill(0);if(a>=0){var r,l=be(oe(a)),s=Object(c.a)(l);try{for(s.s();!(r=s.n()).done;){var n=r.value;t[n[2]]=n[3]}}catch(u){s.e(u)}finally{s.f()}}return t}),[S,oe,be]),he=Object(l.useMemo)((function(){for(var e=0,a=0;a<32;++a)e+=be(oe(a)).length;if(0===e)return 1;var t,r=0,l=Object(c.a)(re);try{for(l.s();!(t=l.n()).done;){var s=t.value;re[re.length-1][0]===s[0]&&re[re.length-1][1]===s[1]&&r++}}catch(n){l.e(n)}finally{l.f()}return r>=3?2:Q>=50?3:0}),[Q,re,be,oe]),je=Object(l.useCallback)((function(e){if(!(A.square>=0)&&!T)if(-1===t||t===e||null===d[t]||0===Y[e])Z(fe(e)),s(e);else{var a=S.indexOf(t),c=ue(a,t,e,Y[e]);W((function(a){return"\u2659"===d[e]||"\u265f"===d[e]?0:a+1})),s(-1),v(c.board),g(c.colors),N(c.pieces),ae(c.castle),J(c.enPassant),B(c.promotion),Z(Array(64).fill(0)),G(!F)}}),[t,A,T,d,Y,F,S,ue,fe]),de=Object(l.useCallback)((function(e){var a=A.square,t=d;t[a]=e,v(t.slice()),B({square:-1,piece:null})}),[d,A]),Oe=Object(l.useCallback)((function(e){var a=!(0===Y[e]),c="";t===e&&(c="#2f2"),((7&e)+(e>>3))%2===1?(c=t!==e?"#7d8796":"#0d0",a&&(c="#bbbb00")):a&&(c="#ffff00");var r=S[12],l=S[28];return(r===e&&2&ie(r,d)&&F||l===e&&1&ie(l,d)&&!F)&&(c="#f44"),Object(O.jsx)("td",{children:Object(O.jsx)(m,{value:d[e],color:c,onClick:function(){return je(e)}})},e)}),[t,Y,S,d,F,ie,je]),ve=Object(l.useCallback)((function(e){return A.square<0||2===o[e].color!==F?null:Object(O.jsx)("td",{children:Object(O.jsx)(m,{value:e,color:"#fff",onClick:function(){return de(e)}})},e)}),[A,F,de]);return Object(l.useEffect)((function(){return U(he)}),[he]),Object(l.useMemo)((function(){var e="Next player: "+(F?"White":"Black"),a=null;if(1===T){var t=S[12],r=S[28];a=2&ie(t,d)&&F?"Black wins":1&ie(r,d)&&!F?"White wins":"Stalemate"}else 2===T?a="Draw by 3-fold repetition":3===T&&(a="Draw by inactivity");for(var l=[],s=0;s<8;s++){for(var n=[],u=0;u<8;u++)n.push(Oe(8*s+u));var o=Object(O.jsxs)("tr",{className:"board-row",children:[Object(O.jsx)("td",{children:Object(O.jsx)(p,{value:String(8-s)})}),n,Object(O.jsx)("td",{children:Object(O.jsx)(p,{value:String(8-s)})})]},8-s);l.push(o)}var i,b=[],f=Object(c.a)(" abcdefgh\t");try{for(f.s();!(i=f.n()).done;){var h=i.value,j=Object(O.jsx)("td",{children:Object(O.jsx)(p,{value:h})},h);b.push(j)}}catch(x){f.e(x)}finally{f.f()}for(var v=[],m=0;m<3;++m){var k=Object(O.jsx)("td",{children:Object(O.jsx)(p,{value:" "})},m);v.push(k)}return v.push(ve("\u2655")),v.push(ve("\u2658")),v.push(ve("\u2656")),v.push(ve("\u2657")),v.push(ve("\u265b")),v.push(ve("\u265e")),v.push(ve("\u265c")),v.push(ve("\u265d")),Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"status",children:e}),Object(O.jsx)("table",{className:"board",style:{borderCollapse:"collapse"},children:Object(O.jsxs)("tbody",{children:[Object(O.jsx)("tr",{children:b}),l,Object(O.jsx)("tr",{children:b})]})}),Object(O.jsx)("table",{children:Object(O.jsx)("tbody",{children:Object(O.jsx)("tr",{children:v})})}),Object(O.jsx)("div",{className:"gameOver",children:a})]})}),[d,S,T,F,Oe,ve,ie])},x=function(){return Object(O.jsxs)("div",{className:"game",children:[Object(O.jsx)("div",{className:"game-board",children:Object(O.jsx)(k,{})}),Object(O.jsxs)("div",{className:"game-info",children:[Object(O.jsx)("div",{}),Object(O.jsx)("ol",{})]})]})};d.a.createRoot(document.getElementById("root")).render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(x,{})}))},8:function(e,a,t){}},[[18,1,2]]]);
//# sourceMappingURL=main.037f1ece.chunk.js.map